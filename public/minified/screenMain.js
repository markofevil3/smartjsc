function ScreenMain(){}ScreenMain.screen=document.createElement("div");ScreenMain.screen.id="screen-main";ScreenMain.imageAdvHolder=null;ScreenMain.hamlScreen=Haml.compile('div(id="menu-holder")',"  | #{menu}",'div(id="middle-panel-wrap")','  div(id="content")','    div(id="content-wrap")','  div(id="image-slider")','div(id="bottom-panel")','  div(id="intro-image" class="home-intro")','    img(id="image" class="home-adv")','a(href="/login")','  div(id="login-icon")');ScreenMain.hamlScreenContact=Haml.compile('div(id="contact-content")','  span(id="title") Smart International Corporation',"  br",'  form(id="contact-form")','    input(type="text" id="name" name="name" class="contact-input" placeholder="Your name")','    div(class="space")','    input(type="text" id="email" name="email" class="contact-input" placeholder="Your email")','    div(class="space")','    textarea(style="resize: none;" id="message" name="message" class="contact-input" placeholder="Your Message" cols=30 rows=10)','    div(class="space")','    input(type="submit", id="send-contact", value="Send")','    div(id="loading-message")');ScreenMain.hamlImageSlider=Haml.compile('ul(id="mycarousel" class="jcarousel jcarousel-skin-tango")',"  | #{rows}");ScreenMain.hamlImage=Haml.compile("li",'  img(src=#{url} class="slider-images")');ScreenMain.start=function(){Menu.initMenu();ScreenMain.screen.innerHTML=ScreenMain.hamlScreen({menu:Menu.menu.haml});var b=ScreenMain.screen.getElementsByClassName("display-menu");ScreenMain.imageAdvHolder=ScreenMain.screen.querySelector("#intro-image");for(var a=0;a<b.length;a++){Button.enable(b[a],function(c){if(Menu.activeMenu!=null&&Menu.activeMenu.id==c.id){Menu.activeMenu=null;Menu.showOther(c);if($(c).find("#number").offset().top!=0){$(c).find("#number").animate({top:"-5.5em"})}if($("#content").css("display")!="none"){$("#content").slideUp()}if(Menu.activeMenuBar!=null){Menu.hideMenuBar(c)}}else{switch(c.id){case"about":Menu.hideOther(c);$("#content").slideDown();$("#content-wrap").html(WebData.CONTENT[c.id]);break;case"camping":Menu.hideOther(c);$("#content").slideDown();$("#content-wrap").html(WebData.CONTENT[c.id]);ajax("/campingImages",{timeStamp:Date.now()},function(d){ScreenMain.initImageSlider(JSON.parse(d).data,"camping")},function(d){alert("There was a problem connecting to the server. Please refresh and try again later.")});break;case"contact":Menu.hideOther(c);$("#content").slideDown();$("#content-wrap").html(ScreenMain.hamlScreenContact());ScreenMain.handleFormSubmit(ScreenMain.screen.querySelector("#contact-form"));break;case"links":case"go-abroad":case"studying":if(Menu.activeMenu&&Menu.activeMenu.id!=c.id&&Menu.activeMenuBar!=null){$(Menu.activeMenu).parent().stop().animate({height:"23%"},{queue:false,duration:500,easing:"easeOutBounce"});$(Menu.activeMenu).find("#number").animate({top:"-5.5em"});Menu.hideMenuBar(Menu.activeMenu);Menu.showOther(c);Menu.showMenuBar(c)}else{Menu.showMenuBar(c)}break;case"news":Menu.hideAll(function(){ScreenManager.setScreen("news")});break;case"gallery":if(Menu.activeMenu&&Menu.activeMenu.id!=c.id&&Menu.activeMenuBar!=null){$(Menu.activeMenu).parent().stop().animate({height:"23%"},{queue:false,duration:500,easing:"easeOutBounce"});$(Menu.activeMenu).find("#number").animate({top:"-5.5em"});Menu.hideMenuBar(Menu.activeMenu);Menu.showOther(c);Menu.showMenuBar(c)}else{Menu.showMenuBar(c)}break}if($(c).find("#number").offset().top<0){$(c).find("#number").animate({top:"0"})}ScreenMain.imageAdvHolder.className=c.id+"-intro";ScreenMain.imageAdvHolder.firstChild.className=c.id+"-adv";$(ScreenMain.imageAdvHolder).hide().slideDown("fast",function(){if($(this).width()>0){ScreenMain.imageAdvHolder.style.left=calculateImagePos(c.id+"-adv")}})}})}setupAnimation()};ScreenMain.initImageSlider=function(a,c){var f="";for(var b=0;b<a.length;b++){f+=ScreenMain.hamlImage({url:a[b]})}var d=ScreenMain.hamlImageSlider({rows:f});var e=ScreenMain.screen.querySelector("#image-slider");if(c=="gallery"){e.className="gallery-image-slider"}else{e.className=""}e.style.height=$(window).height()-80+"px";e.innerHTML=d;jQuery(document).ready(function(){if($("#mycarousel")){jQuery("#mycarousel").jcarousel({vertical:true,wrap:"circular",initCallback:mycarousel_initCallback})}})};ScreenMain.removeImageSlider=function(){ScreenMain.screen.querySelector("#image-slider").innerHTML=""};ScreenMain.handleFormSubmit=function(a){$("#send-contact").click(function(f){f.preventDefault();var c=a.querySelector("#name").value;var b=a.querySelector("#email").value;var d=a.querySelector("#message").value;if(c==""||b==""||d==""){alert("Please enter all information")}else{$("#loading-message").html("Sending...");$("#send-contact").attr("disabled","disabled");$.ajax({type:"POST",url:"contact",data:$(a).serialize(),success:function(e){if(e.data=="success"){a.reset();$("#loading-message").html("");$("#send-contact").removeAttr("disabled");alert("Your message has been sent!")}else{$("#loading-message").html("");$("#send-contact").removeAttr("disabled");alert("Please retry later!")}}});return false}})};var IMG_LEFT_POS={"home-adv":{left:100,min:353},"about-adv":{left:100,min:786},"links-adv":{left:200,min:365},"go-abroad-adv":{left:200,min:380},"studying-adv":{left:200,min:390},"contact-adv":{left:200,min:250},};function calculateImagePos(a){var b=$(window).width()-document.getElementById("intro-image").firstChild.width-IMG_LEFT_POS[a].left;if(b<IMG_LEFT_POS[a].min){return IMG_LEFT_POS[a].min+"px"}return b+"px"}function mycarousel_initCallback(a){a.buttonNext.bind("click",function(){a.startAuto(0)});a.buttonPrev.bind("click",function(){a.startAuto(0)});a.clip.hover(function(){a.stopAuto()},function(){a.startAuto()})};